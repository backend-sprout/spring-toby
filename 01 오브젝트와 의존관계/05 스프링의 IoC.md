# 스프링의 IoC 

## 오브젝트 팩토리를 이용한 스프링 IoC
### 애플리케이션 컨텍스트와 설정 정보

스프링에서는 스프링이 제어권을 가지고 직접 만들고 관계를 부여하는 오브젝트를 **빈**이라고 부른다.      
또한, 스프링 컨테이너가 `생성`과 `관계설정`, `사용`등을 제어해주는 **제어의 역전이 적용된 오브젝트**를 가르키는 말이다.     

스프링에서는 빈의 생성과 관계썰정 같은 제어를 담당하는 **IoC 오브젝트를 빈 팩토리라 부른다.**   
보통 빈 팩토리보다 이를 좀더 확장한 **Application Context 를 주로 사용한다.**   

`빈 팩토리`라고 말할 때는 빈을 생성하고 관계를 설정하는 IoC의 기본 기능에 초점을 맞춘것이다.   
`애플리케이션 컨테스트`라고 말할 때는 애플리케이션 전반에 걸쳐 모든 구성요소의 제어 작업을 담당하는 IoC 엔진이라는 의미다.  
   
애플리케이션 컨텍스트는 별도의 정보를 참고해서 빈의 **생성, 관계설정 등의 제어 작업을 총괄한다.**             
애플리케이션 컨텍스트는 **별도로 설정정보를 담고 있는 무언가를 가져와 이를 활용하는 범용적인 IoC 엔진** 같은 것이다.    

빈팩토리와 애플리케이션 컨텍스트가 사용하는 설정 정보는 실제 비즈니스 로직을 담당하지는 않지만, 
IoC 방식을 이용해 애플리케이션의 컴포넌트를 생성하고, 사용할 관계를 맺어주는 등의 책임을 담당하는 것이다.    

```java
@Configuration
public class XXXConfiguration {
    @Bean
    public SomeBean someBean() {
        return new SomeBean(someSubBean());
    }
    
    @Bean
    public SomeSubBean someSubBean() {
        return new SomeSubBean();
    }
}
```

`@Configuration`을 붙이면 애플리케이션 컨텍스트에 사용할 빈을 만들 **설정 정보 클래스**임을 나타낸다.        
그리고 `@Bean`을 입력하면 애플리케이션 컨텍스트에 사용될 빈을 생성하는 것이다.        
이 과정에서 다른 `Bean 생성 메서드`를 호출하거나, 이미 생성된 Bean 객체 정보를 파라미터로 입력받아 새로운 빈을 만들 수 있다.        

```java
ApplicationContext ac = new ApplicationContext(XXXConfiguration.class);
someBean someBean = ac.getBean("someBean", SomeBean.class)
```
이후 위와 같은 DL(Depnedency LookUp) 방식을 통해 빈으로 만들어진 객체를 불러올 수 있다.       
여기서 이름은, Bean을 만들때 사용했던 메서드 이름이거나 `@Bean 어노테이션의 name 속성값`이다.     
  
우선, 한가지 생각해볼 점이 있다.    
위와 같은 방법은 매번 ApplicationContext 에서 빈을 찾아서 찾아와야한다.   
매우 불편한 방식이며 자동으로 빈을 가져오는 방법이 없을까? 고민해야한다.   

## 애플리케이션 컨텍스트의 동작 방식 
  
오브젝트 팩토리에 대응되는 것이 스프링의 애플리케이션 컨텍스트다.    
스프링에서는 이 애플리케이션 컨텍스트를 **IoC 컨테이너(스프링컨테이너/빈팩토리 등등)**라고 부르기도 한다.     
   
애플리케이션 컨텍스트는 ApplicationContext를 구현하고 있는데  
ApplicationContext 는 BeanFactory를 상속했으므로 일종의 빈팩토리임 셈이다.  
       
애플리케이션 컨텍스트는 애플리케이션에서 IoC를 적용해서 관리할 모든 오브젝트에 대한 생성과 관계 설정을 담당한다.         
대신, 직접 오브젝트를 생성하고 관계를 맺어주는 코드가 없고, 그런 생성정보와 연관관계 정보를 별도의 설정 정보를 통해 얻는다.      
때로는 외부의 오브젝트 팩토리에 그 작업을 위임하고 그 결과를 가져다가 사용하기도 한다.   














